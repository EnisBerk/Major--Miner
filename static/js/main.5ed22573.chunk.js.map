{"version":3,"sources":["images/MajorMinerHeaderLogo.png","base.js","landing/LandingPage.js","components/Chevron.js","components/Accordion.js","info/FaqPage.js","info/AboutPage.js","info/ContactPage.js","info/PrivacyPage.js","landing/LoginForm.js","landing/RegisterForm.js","root/AccountButton.js","root/Header.js","main/AudioVisualizer.js","main/AudioAnalyser.js","main/GameRuleDialog.js","main/NewGamePage.js","main/AudioCard.js","main/SummaryPage.js","info/LeadersPage.js","search/SearchPage.js","search/SearchResult.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","app","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","LandingPage","props","Summary","a","user","auth","currentUser","db","firestore","currentId","uid","userId","userRef","collection","doc","audioRef","tempTag","tempTag1","orderBy","limit","get","clipHistorySnapshot","clipHistory","docs","clip","id","score","data","audio","tagsSnapshot","otherTagSnapshot","Promise","all","audio1","tagsSnapshot1","otherTagSnapshot1","title","Title","url","Url","tags","TAG","join","tag","includes","push","other","setState","where","scoredClipHistorySnapshot","scoredClipHistory","audioSnapshot","scoreTagsSnapshot","otherScoreTagSnapshot","scoreTagsSnapshot1","otherScoreTagSnapshot1","console","log","state","history","pathname","className","Link","to","Component","Chevron","height","width","xmlns","viewBox","d","fill","Accordion","useState","setActive","setActiveState","setHeight","setHeightState","setRotate","setRotateState","content","useRef","onClick","current","scrollHeight","ref","style","maxHeight","dangerouslySetInnerHTML","__html","FaqPage","AboutPage","ContactPage","href","PrivacyPage","LoginForm","handleClickOpen","_isMounted","open","handleClose","handleKeyPress","event","key","document","getElementById","click","handleSubmit","preventDefault","signInWithEmailAndPassword","value","alert","this","item","color","variant","onClose","maxWidth","fullWidth","container","direction","spacing","margin","onKeyPress","type","withRouter","RegisterForm","handleClickOpenForm","openForm","handleCloseForm","agreePolicy","handleAgreePolicy","target","checked","policyError","handleClickOpenPolicy","openPolicy","handleClosePolicy","validateForm","username","email","password","password2","test","emailError","length","passwordError","password2Error","usernameError","createUserWithEmailAndPassword","set","justify","alignItems","error","control","onChange","label","component","fontSize","AccountButton","handleToggle","buttonRef","node","anchorEl","aria-owns","undefined","aria-haspopup","placement","transition","disablePortal","TransitionProps","onClickAway","logout","Header","userDocListener","signOut","then","toggleAuth","catch","err","position","borderBottom","src","HeaderLogo","alt","authenticated","AudioVisualiser","canvas","React","createRef","draw","audioData","context","getContext","x","sliceWidth","lineWidth","strokeStyle","clearRect","beginPath","moveTo","y","lineTo","stroke","AudioAnalyser","setupAudioContext","audioContext","window","AudioContext","webkitAudioContext","gainNode","createGain","gain","connect","destination","audioSource","createMediaElementSource","analyser","createAnalyser","dataArray","Uint8Array","frequencyBinCount","rafId","requestAnimationFrame","tick","onended","play","toggleAudio","firstPlay","clipId","Date","now","count","staticFirebase","FieldValue","increment","updated","serverTimestamp","millis","arrayUnion","merge","pause","playAuto","bind","Audio","crossOrigin","screen","getByteTimeDomainData","resume","cancelAnimationFrame","disconnect","sm","md","lg","disableRipple","disableTouchRipple","AudioVisualizer","GameRuleDialog","toggleExample","showExample","INITIAL_STATE","currentTags","displayTag","loading","GamePage","componentDidMount","firstUserId","loadUrl","loadFiles","xmlhttp","XMLHttpRequest","audiosDataRef","randomRef","onreadystatechange","status","readyState","responseText","myJSON","JSON","parse","items","i","name","metadata","firebaseStorageDownloadTokens","send","existingTags","randomizeId","loadExistingTag","forEach","compareTime","timeStamp","month","thatTime","toMillis","todayDate","getDate","thisMonth","getMonth","year","getFullYear","parseStringToday","today","oneDayRange","userHasSeen","Set","rand","Math","random","currentUserSeenSnapshot","userSeen","add","pnew","findMin","size","pick_pioneer","pick_settler","noSeenSnapshot","floor","oneHour","oneHourNoSeenSnapshot","has","num1","num2","getNextClip","newTags","toLowerCase","replace","split","tempCurrentTags","audioTagRef","audioUsersRef","Object","keys","loadTagsToDb","prevState","getUserId","firstUser","addUser","History","firstUserRef","refreshTotalScore","update","isFrist","userClipHistoryRef","exists","updateHistory","createHistory","oneDayRangeMillis","scoreRecordRef","scoreRef","createdAt","lastUpdatedAt","textInput","prevProps","focus","thickness","map","autoFocus","inputRef","endAdornment","AudioCard","togglePlay","toggleSeeOtherTags","seeOthers","SummaryAudioCard","paddingTop","SearchResultAudioCard","fromSummary","SummaryPage","LeadersPage","handleChange","monthArray","firstOfWeekRange","first","getDay","getTotal","totalLeader","userSnapshot","sort","b","splice","getToday","todayLeader","todayRange","todayUserSnapshot","getWeek","weekLeader","thisWeekRange","weekUserSnapshot","totalScore","scoreSnapshot","getTabContent","align","centered","SearchPage","getTagList","tagList","myPromise","p","searchItem","handleListClick","tagPromise","tagOrder","tagOrderArray","MyTagMap","tagObject","MyTag","clipNumber","getList","topTags","button","primary","xs","SearchResult","location","theme","createMuiTheme","palette","main","secondary","typography","useNextVariants","overrides","MuiInput","underline","PrivateRoute","rest","Route","render","Redirect","App","listener","onAuthStateChanged","exact","path","NewGamePage","Boolean","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5ed22573.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/MajorMinerHeaderLogo.0cebf6b2.png\";","import firebase from 'firebase/app';\nimport 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\n\nconst app = firebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID\n});\n\nexport default app;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport firebase from \"../base\";\n\nclass LandingPage extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      clipHistory: {},\n      scoredClipHistory: {}\n    }\n  };\n  // componentDidMount (){\n\n  // }\n  Summary = async () => {\n    this.user = firebase.auth().currentUser;\n    this.db = firebase.firestore();\n    this.currentId = this.user.uid;\n    this.userId = this.user.uid;\n    this.userRef = this.db.collection('users').doc(this.currentId);\n    this.audioRef = this.db.collection('audios');\n    var tempTag = [];\n    var tempTag1 = [];\n    const clipHistorySnapshot = await this.userRef.collection('clipHistory').orderBy('lastUpdatedAt').limit(10).get();\n    const clipHistory = {};\n\n  for (const clip of clipHistorySnapshot.docs){\n      clipHistory[clip.id] = { score: clip.data().score };\n      var audio = this.db.collection('audios').doc(clip.id).get();\n      tempTag = [];\n      tempTag1 = [];\n      var tagsSnapshot = this.db.collection('audios').doc(clip.id).collection('users').doc(this.userId).get();\n      var otherTagSnapshot = this.db.collection('audios').doc(clip.id).collection('tags').get();\n\n      const [audio1,tagsSnapshot1,otherTagSnapshot1] = await Promise.all([audio,tagsSnapshot,otherTagSnapshot]);\n      clipHistory[clip.id].title = audio1.data().Title;\n      clipHistory[clip.id].url = audio1.data().Url;\n      clipHistory[clip.id].id = clip.id;\n\n      tempTag = tagsSnapshot1.data().tags;\n      clipHistory[clip.id].TAG = tempTag.join(\", \");\n\n      for(const tag of otherTagSnapshot1.docs){\n        if(!tempTag.includes(tag.id)){\n          tempTag1.push(tag.id);\n        }\n      }\n        clipHistory[clip.id].other = tempTag1.join(\", \");\n      this.setState({ clipHistory });\n  }\n\n    const scoredClipHistorySnapshot = await this.userRef.collection('clipHistory').where(\"score\", \">\", 0).orderBy(\"score\").limit(10).get();\n    const scoredClipHistory = {};\n    for(const clip of scoredClipHistorySnapshot.docs){\n      scoredClipHistory[clip.id] = { score: clip.data().score };\n      var audioSnapshot = this.db.collection('audios').doc(clip.id).get();\n      var scoreTagsSnapshot = this.db.collection('audios').doc(clip.id).collection('tags').where(\"userId\", 'array-contains',this.userId).get();\n      var otherScoreTagSnapshot = this.db.collection('audios').doc(clip.id).collection('tags').get();\n\n    const [audio1,scoreTagsSnapshot1,otherScoreTagSnapshot1] = await Promise.all([audioSnapshot,scoreTagsSnapshot,otherScoreTagSnapshot]);\n      scoredClipHistory[clip.id].title = audio1.data().Title;\n      scoredClipHistory[clip.id].url = audio1.data().Url;\n      scoredClipHistory[clip.id].id = clip.id;\n      tempTag = [];\n      tempTag1 = [];\n\n      for(const tag of scoreTagsSnapshot1.docs){\n        tempTag.push(tag.id);\n      }\n      scoredClipHistory[clip.id].TAG = tempTag.join(\", \");\n\n      for(const tag of otherScoreTagSnapshot1.docs){\n        if(!tempTag.includes(tag.id)){\n          tempTag1.push(tag.id);\n        }\n      }\n      scoredClipHistory[clip.id].other = tempTag1.join(\", \");\n      this.setState({ scoredClipHistory });\n    }\n    console.log(this.state.scoredClipHistory)\n    console.log(this.state.clipHistory)\n\n    this.props.history.push({\n      pathname: '/main/clip',\n      state: {\n       clipHistory: this.state.clipHistory,\n       scoredClipHistory: this.state.scoredClipHistory\n      }\n    })\n  }\n  render() {\n    return (\n      <div className=\"home-page\">\n          <div className=\"homelogo-page\">\n      </div>\n      <div className=\"privacy-corner\">\n      <Link to=\"/info/privacy\">Privacy Policy</Link>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default LandingPage;\n","import React from \"react\";\n\nfunction Chevron(props) {\n\n return (\n   <svg\n   className={props.className}\n     height={props.height}\n     width={props.width}\n   xmlns=\"http://www.w3.org/2000/svg\"\n   viewBox=\"0 0 320 512\"\n   >\n   <path d=\"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z\" fill={props.fill}>\n   </path>\n   </svg>\n\n );\n}\n\nexport default Chevron;\n","import \"./Accordion.css\";\nimport Chevron from \"../components/Chevron\";\nimport React, { useState, useRef } from \"react\";\n\nfunction Accordion(props) {\n  const [setActive, setActiveState] = useState(\"\");\n    const [setHeight, setHeightState] = useState(\"0px\");\n    const [setRotate, setRotateState] = useState(\"accordion__icon\");\n\n    const content = useRef(null);\n\n    function toggleAccordion() {\n      setActiveState(setActive === \"\" ? \"active\" : \"\");\n      setHeightState(\n        setActive === \"active\" ? \"0px\" : `${content.current.scrollHeight}px`\n      );\n      setRotateState(\n        setActive === \"active\" ? \"accordion__icon\" : \"accordion__icon rotate\"\n      );\n    }\n\n    return (\n      <div className=\"accordion__section\">\n        <button className={`accordion ${setActive}`} onClick={toggleAccordion}>\n          <p className=\"accordion__title\">{props.title}</p>\n          <Chevron className={`${setRotate}`} width={10} fill={\"#777\"} />\n        </button>\n        <div\n          ref={content}\n          style={{ maxHeight: `${setHeight}` }}\n          className=\"accordion__content\"\n        >\n          <div\n            className=\"accordion__text\"\n            dangerouslySetInnerHTML={{ __html: props.content }}\n          />\n        </div>\n      </div>\n    );\n  }\n\nexport default Accordion;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Accordion from \"../components/Accordion\";\n\nclass FaqPage extends Component {\n  render() {\n    return (\n      <div className=\"faq-page\">\n      <div className=\"privacy-corner\">\n      <Link to=\"/info/privacy\">Privacy Policy</Link>\n      </div>\n      <h1 className=\"page-title\">Frequently Asked Questions</h1>\n      <div>\n      <Accordion\n      title=\"How should I describe the clips?\"\n      content=\"There are many ways you could describe a clip, we want you to make up your own, but if you're stuck, here are some examples. You could use the names of the things you hear (as specifically or generally as you like), general descriptions of the scene, the time of day or year you think it is, even how it makes you feel. Here are some examples, by no means exhaustive, of each of those categories:\n      <br></br>\n\n    <li>    Animals  bird, songbird, sparrow, white-crowned sparrow,\n        gambel's white crowned sparrow\n    </li>\n    <li>\n        Human-generated sounds  airplane, helicopter, drilling,\n        engine, rumbling\n    </li>\n    <li>\n        Weather  wind, rain, thunder, gale, drizzle, dripping,\n        stream, river\n    </li>\n    <li>\n        Time  summer, winter, june, august afternoon, night, dawn\n    </li>\n    <li>\n        Feelings  calm, busy, soothing, loud, cacophonous\n    </li>\n    <li>\n        Scenes  quiet night, dawn chorus\n    </li>\n        \"\n        />\n        <Accordion\n        title=\"Can I input more than one tag at a time?\"\n        content=\"Yes, separate your tags with commas.\"\n        />\n        <Accordion\n        title=\"What's a good strategy to use?\"\n        content=\"If you want to earn some points quickly, you can try to guess the obvious labels for a clip. Someone else has probably already used them, so you might get 1 point or you might get 0 points, depending on how many people have used them already. If you're feeling more patient, you can tag a clip with a slightly less obvious, more creative, or more subjective label, so you'll have a better chance of being the first person to use that tag. You won't get any points initially, but when someone else comes along and uses it too, you'll get 2 points. You'd be surprised how frequently other people are thinking the same thing as you. Just remember that every time one user scores a single point, another user has just scored two.\"\n        />\n        <Accordion\n        title=\"Does it matter how I capitalize, punctuate, or spell words?\"\n        content=\"Not much. Our matching algorithm is clever enough to handle these and give you credit for matching other players' tags that differ in capitalization, punctuation, and spelling.\"\n        />\n        <Accordion\n        title=\"I found a clip that won't play, what should I do?\"\n        content=\"If you press the play button and it jumps right back to play mode without playing anything, you've probably found a broken clip. If you could tag it won't play, we'll remove it from the game as quickly as we can.\"\n        />\n        <Accordion\n        title=\"Why can't I use the browser's back button to go to the previous clip?\"\n        content=\"That's intentional. Once you've gone to the summary page, you can go back and listen to your last clip (which you can do that from the summary page anyway), but you can't tag it anymore. Any tags you try to submit will be ignored. Only go to the summary page once you're finished tagging your current clip. This is to prevent people from looking at the artist name or other metadata when they're tagging a clip.\"\n          />\n          </div>\n          &nbsp;\n          &nbsp;\n          </div>\n        );\n      }\n    }\n\n    export default FaqPage;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Accordion from \"../components/Accordion\";\n\nclass AboutPage extends Component {\n  render() {\n    return (\n      <div className=\"about-page\">\n      <div className=\"privacy-corner\">\n      <Link to=\"/info/privacy\">Privacy Policy</Link>\n      </div>\n      <h1 className=\"page-title\">About</h1>\n      <div className=\"about-accordion\">\n      <Accordion\n      title=\"What is MajorMiner?\"\n      content=\"MajorMiner is a sound labeling game in which you will be presented with one randomly selected 10-second sound\n      clip at a time. You will then describe that clip with a word or phrase (we call them tags) and press enter. If you're the first person to describe that clip with that tag, you'll get 2 points when the next person tags that clip with that tag.\n      If you're the second person to describe that clip with that tag, you'll get 1 point immediately. If more than two people have already tagged that clip with that tag, you won't get any points, but you can always try another tag.\n      You can tag each clip as many times as you want. When you are done with that clip, press the new clip button to listen to a new one.\"\n      />\n      <Accordion\n      title=\"Why is it important?\"\n      content=\"The goal of the game, besides just listening to interesting soundscapes, is to label them with original, yet relevant words and phrases that other players agree with.\"\n      />\n      <Accordion\n      title=\"How will playing help the project?\"\n      content=\"We're going to use your descriptions to teach our computers to recognize these same sounds in over 100,000 hours of recordings so that we can better understand the behavior of animals and how it is affected by human activity.\"\n      />\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default AboutPage;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass ContactPage extends Component {\n  render() {\n    return (\n        <div className=\"contactus-page\">\n        <div className=\"privacy-corner\">\n        <Link to=\"/info/privacy\">Privacy Policy</Link>\n        </div>\n        <h1 className=\"page-title\">Contact Us</h1>\n        <div className=\"contactus-contentbox\">\n        <div className=\"textbox-content\"><p>Please contact us with any questions, comments, congratulations, or concerns! <br></br><br></br> The easiest way is to leave a comment on our blog: <br></br><br></br><a href=\"blog.majorminer.org\" style={{ \"color\": \"black\", \"text-decoration\": \"underline\" }}>blog.majorminer.org</a><br></br><br></br>Or you can also send us an email: <br></br><br></br><a href=\"mailto: info@majorminer.org\" style={{ \"color\": \"black\", \"text-decoration\": \"underline\" }}>info@majorminer.org</a></p>\n        </div>\n        </div>\n    </div>\n    );\n  }\n}\n\nexport default ContactPage;\n","import React, { Component } from \"react\";\n\nclass PrivacyPage extends Component {\n  render() {\n    return (\n\n      <div className=\"privacy-page\">\n      <h1 className=\"page-title\">Privacy & Participation</h1>\n      <div className=\"privacy-contentbox\">\n      <div className=\"textbox-content\"><p>You are being asked to participate in this research study because you are an adult at least 18 years of age. The purpose of this research study is to collect descriptions of sounds from people, so that we can train computer models to automatically describe new sounds. If you agree to participate, we will ask you to listen to sounds and provide free-form textual descriptions of them. Listening to and labeling each sound will take less than a minute, and you can do as many or as few as you would like, whenever you would like. Research-related risks to you are minimal, but include fatigue and exposure to volume variations between sounds. We will only record your descriptions, we will not record any personally identifiable information from you and will only identify you within our system by a username of your choosing. The descriptions that we collect will be stored on our servers at Brooklyn College and made available to other researchers for the same purpose. Your participation in this research is voluntary. If you have any questions, you can contact Michael Mandel at: <a href=\"mailto: mim@sci.brooklyn.cuny.edu\" style={{ \"color\": \"black\", \"text-decoration\": \"underline\" }}>mim@sci.brooklyn.cuny.edu</a> or 718.951.5000 x2053. If you have any questions about your rights as a research participant or if you would like to talk to someone other than the researchers, you can contact CUNY Research Compliance Administrator at: <a href=\"mailto: HRPP@cuny.edu\" style={{ \"color\": \"black\", \"text-decoration\": \"underline\" }}>HRPP@cuny.edu</a> or 646.664.8918.</p>\n      </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default PrivacyPage;\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport app from \"../base\";\nimport {\n  Grid,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  FormControl,\n  Input,\n  InputLabel\n} from \"@material-ui/core\";\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n    this.state = {\n      open: false\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  handleClickOpen = () => {\n    if (this._isMounted) {\n      this.setState({ open: true });\n    }\n  };\n\n  handleClose = () => {\n    if (this._isMounted) {\n      this.setState({ open: false });\n    }\n  };\n\n  handleKeyPress = event => {\n    if (event.key === 'Enter') {\n      document.getElementById(\"submitButton\").click();\n    }\n  }\n\n  handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const user = await app\n        .auth()\n        .signInWithEmailAndPassword(document.getElementById(\"email\").value, document.getElementById(\"password\").value);\n        console.log(user);\n        if (user) {\n          this.handleClose();\n          this.props.history.push(\"/main/clip\");\n        }\n    } catch (err) {\n      alert(err);\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    return (\n      <Grid item>\n        <Button color=\"secondary\" variant=\"outlined\" onClick={this.handleClickOpen}>Login</Button>\n        <Dialog\n          open={this.state.open}\n          onClose={this.handleClose}\n          maxWidth=\"xs\"\n          fullWidth\n        >\n          <DialogTitle>Login</DialogTitle>\n          <DialogContent>\n            <Grid container direction=\"column\" spacing={16}>\n              <Grid item>\n                <FormControl margin=\"normal\" fullWidth>\n                  <InputLabel>Email</InputLabel>\n                  <Input id=\"email\" onKeyPress={this.handleKeyPress} />\n                </FormControl>\n              </Grid>\n              <Grid item>\n                <FormControl margin=\"normal\" fullWidth>\n                  <InputLabel>Password</InputLabel>\n                  <Input id=\"password\" type=\"password\" onKeyPress={this.handleKeyPress} />\n                </FormControl>\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button id=\"submitButton\" onClick={this.handleSubmit}>Submit</Button>\n          </DialogActions>\n        </Dialog>\n      </Grid>\n    );\n  }\n}\n\nexport default withRouter(LoginForm);\n","import React, { Component } from \"react\";\nimport app from \"../base\";\nimport {\n  Grid,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Checkbox,\n  Button,\n  FormControl,\n  FormControlLabel,\n  FormHelperText,\n  Input,\n  InputLabel,\n  Link\n} from \"@material-ui/core\";\nimport PrivacyPage from \"../info/PrivacyPage\";\nimport { withRouter } from \"react-router-dom\";\n\nclass RegisterForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openForm: false,\n      agreePolicy: false,\n      openPolicy: false,\n      policyError: false,\n      emailError: false,\n      passwordError: false,\n      password2Error: false,\n      usernameError:false\n    };\n  }\n\n  handleClickOpenForm = () => {\n    this.setState({ openForm: true });\n  };\n\n  handleCloseForm = () => {\n    this.setState({ openForm: false, agreePolicy: false });\n  };\n\n  handleAgreePolicy = event => {\n    this.setState({ agreePolicy: event.target.checked });\n    if (event.target.checked) {\n      this.setState({ policyError: false });\n    }\n  }\n\n  handleClickOpenPolicy = () => {\n    this.setState({ openPolicy: true });\n  };\n\n  handleClosePolicy = () => {\n    this.setState({ openPolicy: false });\n  };\n\n  handleKeyPress = event => {\n    if (event.key === 'Enter') {\n      document.getElementById(\"submitButton\").click();\n    }\n  }\n\n  validateForm = () => {\n    const username = document.getElementById(\"username\").value;\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    const password2 = document.getElementById(\"password2\").value;\n    const re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    if (re.test(email)) {\n      this.setState({ emailError: false });\n    } else {\n      this.setState({ emailError: true });\n    }\n\n    if (password.length < 6) {\n      this.setState({ passwordError: true });\n    } else {\n      this.setState({ passwordError: false });\n    }\n\n    if (password !== password2) {\n      this.setState({ password2Error: true });\n    } else {\n      this.setState({ password2Error: false });\n    }\n\n    if(username === ''){\n      this.setState({usernameError: true});\n    }else{\n      this.setState({usernameError: false});\n    }\n\n    if (!this.state.agreePolicy) {\n      this.setState({ policyError: true });\n    }\n\n    return ({ email, password, username });\n  }\n\n  handleSubmit = async event => {\n    const { history } = this.props;\n    event.preventDefault();\n    // validation part\n    const { email, password, username } = await this.validateForm();\n    const db = app.firestore();\n    if (!this.state.policyError && !this.state.emailError && !this.state.passwordError && !this.state.password2Error && !this.state.usernameError) {\n      // create User in app\n      try {\n        const user = await app\n          .auth()\n          .createUserWithEmailAndPassword(email, password);\n        console.log(user);\n        if (user) {\n          // to create a new user document\n          db.collection('users').doc(app.auth().currentUser.uid).set({\n            username: username,\n            score: 0\n          });\n          this.handleCloseForm();\n          history.push(\"/main/clip\");\n        }\n      } catch(err) {\n        alert(err);\n      }\n    }\n  }\n\n  render() {\n    return (\n      <Grid item>\n        <Button\n          color=\"secondary\"\n          variant=\"outlined\"\n          onClick={this.handleClickOpenForm}\n        >Register</Button>\n        <Dialog\n          open={this.state.openForm}\n          onClose={this.handleCloseForm}\n          maxWidth=\"xs\"\n          fullWidth\n        >\n          <DialogTitle>Register</DialogTitle>\n          <DialogContent>\n            <Grid container direction=\"column\" justify=\"space-evenly\" alignItems=\"stretch\">\n              <Grid item>\n                <FormControl margin=\"normal\" fullWidth>\n                  <InputLabel>Username</InputLabel>\n                  <Input id=\"username\" type=\"text\" onKeyPress={this.handleKeyPress} />\n                </FormControl>\n                 {this.state.usernameError ? (\n                  <FormHelperText error={true}>Must Enter Your Username.</FormHelperText>\n                ) : \"\"}\n              </Grid>\n              <Grid item>\n                <FormControl margin=\"normal\" fullWidth>\n                  <InputLabel>Email</InputLabel>\n                  <Input id=\"email\" type=\"email\" onKeyPress={this.handleKeyPress} />\n                </FormControl>\n                {this.state.emailError ? (\n                  <FormHelperText error={true}>Invalid email.</FormHelperText>\n                ) : \"\"}\n              </Grid>\n              <Grid item>\n                <FormControl margin=\"normal\" fullWidth>\n                  <InputLabel>Password</InputLabel>\n                  <Input id=\"password\" type=\"password\" onKeyPress={this.handleKeyPress} />\n                </FormControl>\n                {this.state.passwordError ? (\n                  <FormHelperText error={true}>Password should be more than 6 characters.</FormHelperText>\n                ) : \"\"}\n              </Grid>\n              <Grid item>\n                <FormControl margin=\"normal\" fullWidth>\n                  <InputLabel>Reenter password</InputLabel>\n                  <Input id=\"password2\" type=\"password\" onKeyPress={this.handleKeyPress} />\n                </FormControl>\n                {this.state.password2Error ? (\n                  <FormHelperText error={true}>Passwords didn't match.</FormHelperText>\n                ) : \"\"}\n              </Grid>\n              <Grid item>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={this.state.agreePolicy}\n                      onChange={this.handleAgreePolicy}\n                    />\n                  }\n                  label={\n                    <p>I accept the&nbsp;\n                      <Link\n                        component=\"button\"\n                        onClick={this.handleClickOpenPolicy}\n                        style={{ fontSize: \"1em\" }}\n                      >\n                        Privacy Policy\n                      </Link>\n                    </p>\n                  }\n                />\n                {this.state.policyError ? (\n                  <FormHelperText error={true}>You have to accept the privacy policy.</FormHelperText>\n                ) : \"\"}\n                <Dialog\n                  open={this.state.openPolicy}\n                  onClose={this.handleClosePolicy}\n                  maxWidth={false}\n                >\n                  <DialogContent className=\"privacy-in-dialog\">\n                    <PrivacyPage />\n                  </DialogContent>\n                </Dialog>\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button id=\"submitButton\" onClick={this.handleSubmit}>Submit</Button>\n          </DialogActions>\n        </Dialog>\n      </Grid>\n    );\n  }\n}\n\nexport default withRouter(RegisterForm);\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  IconButton,\n  Popper,\n  Grow,\n  Paper,\n  ClickAwayListener,\n  MenuList,\n  MenuItem\n} from \"@material-ui/core\";\nimport AccountCircle from '@material-ui/icons/AccountCircle';\n\nclass AccountButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false\n    };\n  }\n\n  handleToggle = () => {\n    this.setState(state => ({ open: !state.open }));\n  }\n\n  handleClose = event => {\n    // if (this.anchorEl.contains(event.target)) {\n    //   return;\n    // }\n\n    this.setState({ open: false });\n  }\n\n  render() {\n    const { open } = this.state;\n    return (\n      <div>\n        <IconButton\n          buttonRef={node => {\n            this.anchorEl = node;\n          }}\n          aria-owns={open ? \"account-menu\" : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.handleToggle}\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n        <Popper\n          open={open}\n          anchorEl={this.anchorEl}\n          placement=\"bottom-end\"\n          transition\n          disablePortal\n        >\n          {({ TransitionProps }) => (\n            <Grow {...TransitionProps}>\n              <Paper>\n                <ClickAwayListener onClickAway={this.handleClose}>\n                  <MenuList>\n                    <MenuItem onClick={this.handleClose}>\n                      <Link to=\"/main\" style={{ color: 'black' }}>Summary</Link>\n                    </MenuItem>\n                    <MenuItem onClick={this.handleClose}>\n                      Change password\n                    </MenuItem>\n                    <MenuItem onClick={() => {\n                      this.props.logout();\n                      this.handleClose();\n                    }}>Logout</MenuItem>\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n      </div>\n    );\n  }\n}\n\nexport default AccountButton;\n","import React, { Component } from \"react\";\nimport HeaderLogo from '../images/MajorMinerHeaderLogo.png'\nimport {\n  AppBar,\n  Toolbar,\n  ButtonBase\n} from \"@material-ui/core\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport firebase from \"../base\";\nimport LoginForm from \"../landing/LoginForm\";\nimport RegisterForm from \"../landing/RegisterForm\";\nimport AccountButton from \"./AccountButton\";\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      score: null\n    };\n  }\n\n  componentDidMount() {\n    this.db = firebase.firestore();\n    this.user = firebase.auth().currentUser;\n   // this.userRef = this.db.collection('users').doc(this.user.uid);\n    if (this.user) {\n      //this.userRef =\n      this.db.collection('users').doc(this.user.uid).get().then(user => {\n          this.setState({ score: user.data().score });\n      });\n    }\n  }\n\n  logout = () => {\n    if (this.userDocListener) {\n      this.userDocListener();\n    }\n    firebase.auth().signOut().then(() => {\n      this.props.toggleAuth(false);\n    }).catch(err => {\n      console.log(err);\n    })\n    this.props.history.push('/Major--Miner');\n    //this.props.history.push('/');\n\n    this.setState({ score: 0});\n  }\n\n  componentWillUnmount() {\n    if (this.userDocListener) {\n      this.userDocListener();\n    }\n  }\n\n  render() {\n\n    return (\n      <AppBar position=\"sticky\" style={{borderBottom: '4px solid white'}}>\n        <Toolbar>\n          <div className=\"nav-container\">\n            <ButtonBase component={Link} to=\"/Major--Miner\" className=\"nav-item\"><img src={HeaderLogo} height={40} alt=\"Logo\" /></ButtonBase>\n            <ButtonBase component={Link} to=\"/Major--Miner\" className=\"nav-item\">Home</ButtonBase>\n            <ButtonBase component={Link} to=\"/info/about\" className=\"nav-item\">About</ButtonBase>\n            <ButtonBase component={Link} to=\"/info/faq\" className=\"nav-item\">FAQ</ButtonBase>\n            <ButtonBase component={Link} to=\"/info/contact\" className=\"nav-item\">Contact Us</ButtonBase>\n            {/* <Link to=\"/\" className=\"nav-item\"><h2>Major Miner</h2></Link> */}\n            {this.props.authenticated ? (\n              <ButtonBase component={Link} to=\"/main/clip\" className=\"nav-item\">Game</ButtonBase>\n            ) : \"\"}\n            {this.props.authenticated ? (\n              <ButtonBase component={Link} to=\"/info/leaders\" className=\"nav-item\">High Scores</ButtonBase>\n             ) : \"\"}\n            {this.props.authenticated ? (\n              <ButtonBase component={Link} to=\"/search\" className=\"nav-item\">Search</ButtonBase>\n            ) : \"\"}\n            {this.props.authenticated ? (\n              <div className=\"account-button\">\n                <h4 style={{ \"margin\": \"0 0.5em\", \"padding\": \"0 0.5em\", \"font-weight\": \"400\" }}>Score: {this.state.score}</h4>\n                <AccountButton logout={this.logout} />\n              </div>\n            ) : (\n              <div className=\"account-button\">\n                <LoginForm />\n                &nbsp;\n                &nbsp;\n                <RegisterForm />\n              </div>\n            )}\n          </div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nexport default withRouter(Header);\n","import React, { Component } from 'react';\n\nclass AudioVisualiser extends Component {\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n  }\n\n  componentDidUpdate() {\n    this.draw();\n  }\n\n  draw() {\n    const { audioData } = this.props;\n    const canvas = this.canvas.current;\n    const height = canvas.height;\n    const width = canvas.width;\n    const context = canvas.getContext('2d');\n    let x = 0;\n    const sliceWidth = (width * 1.0) / audioData.length;\n\n    context.lineWidth = 1;  // stroke width\n    context.strokeStyle = \"#000000\";  // stroke color\n    context.clearRect(0, 0, width, height);\n    context.beginPath();\n    context.moveTo(0, height / 2);\n\n    for (const item of audioData) {\n      const y = item / 255.0 * height;\n      context.lineTo(x, y);\n      x += sliceWidth;\n    }\n\n    context.lineTo(x, height / 2);\n    context.stroke();\n  }\n\n  render() {\n    return <canvas width=\"300\" height=\"300\" ref={this.canvas} className=\"audio-canvas\" />;\n  }\n}\n\nexport default AudioVisualiser;","import React, { Component } from \"react\";\nimport { Grid, IconButton } from \"@material-ui/core\";\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\nimport Pause from \"@material-ui/icons/Pause\";\nimport AudioVisualizer from \"./AudioVisualizer\";\nimport firebase from \"../base\";\nimport staticFirebase from \"firebase/app\";\n\nclass AudioAnalyser extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n    this.state = {\n      audioData: new Uint8Array(0),\n      play: false,\n      url: '',\n    };\n    this.tick = this.tick.bind(this);\n  }\n\n  setupAudioContext = () => {\n    // set up audioContext\n    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    this.gainNode = this.audioContext.createGain();\n    this.gainNode.gain.value = 15;\n    this.gainNode.connect(this.audioContext.destination);\n\n    // set up audio\n    this.audioSource = this.audioContext.createMediaElementSource(this.audio);\n    this.audioSource.connect(this.gainNode);\n\n    // set up audio analyser\n    this.analyser = this.audioContext.createAnalyser();\n    this.gainNode.connect(this.analyser);\n    this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n    this.rafId = requestAnimationFrame(this.tick);\n\n    // put 'play' state to false when the sound ends\n    this.audio.onended = () => {\n      if (this._isMounted) {\n        this.setState({ play: false});\n      }\n    }\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.user = firebase.auth().currentUser;\n    this.db = firebase.firestore();\n    this.currentId = firebase.auth().currentUser.uid;\n    this.firstPlay = 0;\n    this.audio = new Audio(this.props.url);\n    this.audio.crossOrigin = \"anonymous\";\n    if(window.screen.height > 420 && window.screen.width > 380){\n      this.toggleAudio();\n    }\n  }\n\n  tick() {\n    this.analyser.getByteTimeDomainData(this.dataArray);\n    if (this._isMounted) {\n      this.setState({ audioData: this.dataArray });\n    }\n    this.rafId = requestAnimationFrame(this.tick);\n  }\n\n  toggleAudio = () => {\n      if (this.firstPlay === 0) {\n        try {\n          this.setupAudioContext();//first time hit play, set up audio context\n          console.log(\"props!\" , this.props.clipId);\n          var d = Date.now();\n          this.db.collection('Randomize').doc(this.props.clipId).set({//this clip has been seen once by this user\n            count:  staticFirebase.firestore.FieldValue.increment(1),\n            updated: staticFirebase.firestore.FieldValue.serverTimestamp(),\n            millis: d,\n            userId: staticFirebase.firestore.FieldValue.arrayUnion(this.currentId)\n          },{merge:true});\n        } catch(err) {\n          console.log(err);\n        }\n    }\n    this.state.play ? this.audio.pause() : this.playAuto(this.audio);\n    if (this._isMounted) {\n      this.setState({ play: !this.state.play });\n    }\n    this.firstPlay ++;\n  };\n\n  playAuto(audio){\n    this.audioContext.resume().then(() => {\n       audio.play();\n    });\n  }\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.rafId);\n    this.analyser.disconnect();\n    this.gainNode.disconnect();\n    this.audioSource.disconnect();\n    this._isMounted = false;\n  }\n\n  render() {\n    return (\n      <Grid item sm={6} md={6} lg={6} className=\"canvas-container\">\n        <IconButton\n          className=\"play-button\"\n          onClick={this.toggleAudio}\n          disableRipple\n          disableTouchRipple\n        >\n          {this.state.play ? (\n            <Pause style={{ fontSize: \"180px\" }} />\n          ) : (\n            <PlayArrow style={{ fontSize: \"180px\" }} />\n          )}\n        </IconButton>\n        {this.state.play ? (\n          <AudioVisualizer audioData={this.state.audioData} />\n        ) : (\n          <canvas width=\"300\" height=\"300\" className=\"audio-canvas\" />\n        )}\n      </Grid>\n    );\n  }\n}\n\nexport default AudioAnalyser;","import React, { Component } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  Button,\n  ButtonBase\n} from \"@material-ui/core\";\n\n//TODO: Read from DB to check if user is the first time to play game and pop up the game rule if true\nclass GameRuleDialog extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      showExample: false\n    };\n  }\n\n  toggleExample = () => {\n    this.setState({ showExample: !this.state.showExample });\n  }\n\n  handleClickOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleClose = () => {\n    this.setState({ open: false, showExample: false });\n  }\n\n  render() {\n    return (\n      <div>\n        <Button onClick={this.handleClickOpen} style={{ color: 'white'}}>Rules</Button>\n        <Dialog\n          open={this.state.open}\n          onClose={this.handleClose}\n        >\n          <DialogTitle>Game Rules</DialogTitle>\n          <DialogContent>\n            <ul className=\"rule-list\">\n              <li>You will be presented with one randomly selected 10-second sound clip at a time.</li>\n              <li>Describe that clip with a word or phrase (we call them \"tags\", here are some&nbsp;\n              <ButtonBase\n                onClick={this.toggleExample}\n                style={{ \"fontSize\": \"0.9em\", \"textDecoration\": \"underline\" }}\n              >examples</ButtonBase>\n              ) and <b>press enter</b>.</li>\n              {this.state.showExample ? (\n                <div className=\"example-tags-list\">\n                <ul>\n                  <li>\n                    Animals  bird, songbird, sparrow, white-crowned sparrow,\n                    gambel's white crowned sparrow\n                  </li>\n                  <li>\n                    Human-generated sounds  airplane, helicopter, drilling,\n                    engine, rumbling\n                  </li>\n                  <li>\n                    Weather  wind, rain, thunder, gale, drizzle, dripping,\n                    stream, river\n                  </li>\n                  <li>Scenes  quiet night, dawn chorus</li>\n                  <li>\n                    Time  summer, winter, june, august afternoon, night, dawn\n                  </li>\n                  <li>Feelings  calm, busy, soothing, loud, cacophonous</li>\n                </ul>\n                </div>\n              ) :\"\"}\n              <li>If you're the first person to describe that clip with that tag, you'll get <b>2 points</b> when the next person tags that clip with that tag.</li>\n              <li>If you're the second person to describe that clip with that tag, you'll get <i>1 point</i> immediately.</li>\n              <li>If more than two people have already tagged that clip with that tag, you <b>won't get any points</b>, but you can try another tag.</li>\n              <li>Tag each clip as many times as you want, follow one of the \"next clip\" links to listen to a new one.</li>\n            </ul>\n          </DialogContent>\n          <p style={{ \"margin\": \"0em 2em 2em\" }}>You can come back to see the rules by clicking \"rules\" at the top-left corner.</p>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default GameRuleDialog;\n","import React, { Component } from \"react\";\n      import {\n        Grid,\n        FormControl,\n        Input,\n        InputLabel,\n        InputAdornment,\n        Icon,\n        IconButton,\n        FormHelperText,\n        CircularProgress,\n        Tooltip\n      } from \"@material-ui/core\";\n      import { Link } from \"react-router-dom\";\n      import Send from \"@material-ui/icons/Send\";\n      import KeyboardArrowRight from \"@material-ui/icons/KeyboardArrowRight\";\n      import KeyboardArrowLeft from \"@material-ui/icons/KeyboardArrowLeft\";\n      import Help from \"@material-ui/icons/HelpOutline\";\n      import AudioAnalyser from \"./AudioAnalyser\";\n      import firebase from \"../base\";\n      import staticFirebase from \"firebase\";\n      import GameRuleDialog from \"./GameRuleDialog\";\n\n      const INITIAL_STATE = {\n        currentTags:{},\n        displayTag:{},\n        loading: true,\n        clipHistory: {},\n        scoredClipHistory: {},\n      };\n\n      export default class GamePage extends Component {\n        constructor(props) {\n          super(props);\n          this.state = {...INITIAL_STATE};\n          this.textInput = React.createRef();\n        }\n        componentDidMount = async() =>{\n          this.user = firebase.auth().currentUser;\n          this.db = firebase.firestore();\n          this.currentId = firebase.auth().currentUser.uid;\n          this.userId = this.user.uid;\n          this.userRef = this.db.collection('users').doc(this.currentId);\n          this.audioRef = this.db.collection('audios');\n          this.firstUserId = '';\n          this.loadUrl();\n          //this.loadFiles();\n         // this.Summary();\n        }\n        componentDidUpdate(prevProps, prevState) {\n          this.textInput.current.focus();\n        }\n        Summary = async () => {\n          var tempTag = [];\n          var tempTag1 = [];\n          const clipHistorySnapshot = await this.userRef.collection('clipHistory').orderBy('lastUpdatedAt').limit(10).get();\n          const clipHistory = {};\n\n        for (const clip of clipHistorySnapshot.docs){\n            clipHistory[clip.id] = { score: clip.data().score };\n            var audio = this.db.collection('audios').doc(clip.id).get();\n            tempTag = [];\n            tempTag1 = [];\n            var tagsSnapshot = this.db.collection('audios').doc(clip.id).collection('users').doc(this.userId).get();\n            var otherTagSnapshot = this.db.collection('audios').doc(clip.id).collection('tags').get();\n\n            const [audio1,tagsSnapshot1,otherTagSnapshot1] = await Promise.all([audio,tagsSnapshot,otherTagSnapshot]);\n            clipHistory[clip.id].title = audio1.data().Title;\n            clipHistory[clip.id].url = audio1.data().Url;\n            clipHistory[clip.id].id = clip.id;\n\n            tempTag = tagsSnapshot1.data().tags;\n            clipHistory[clip.id].TAG = tempTag.join(\", \");\n\n            for(const tag of otherTagSnapshot1.docs){\n              if(!tempTag.includes(tag.id)){\n                tempTag1.push(tag.id);\n              }\n            }\n              clipHistory[clip.id].other = tempTag1.join(\", \");\n            this.setState({ clipHistory });\n        }\n\n          const scoredClipHistorySnapshot = await this.userRef.collection('clipHistory').where(\"score\", \">\", 0).orderBy(\"score\").limit(10).get();\n          const scoredClipHistory = {};\n          for(const clip of scoredClipHistorySnapshot.docs){\n            scoredClipHistory[clip.id] = { score: clip.data().score };\n            var audioSnapshot = this.db.collection('audios').doc(clip.id).get();\n            var scoreTagsSnapshot = this.db.collection('audios').doc(clip.id).collection('tags').where(\"userId\", 'array-contains',this.userId).get();\n            var otherScoreTagSnapshot = this.db.collection('audios').doc(clip.id).collection('tags').get();\n\n          const [audio1,scoreTagsSnapshot1,otherScoreTagSnapshot1] = await Promise.all([audioSnapshot,scoreTagsSnapshot,otherScoreTagSnapshot]);\n            scoredClipHistory[clip.id].title = audio1.data().Title;\n            scoredClipHistory[clip.id].url = audio1.data().Url;\n            scoredClipHistory[clip.id].id = clip.id;\n            tempTag = [];\n            tempTag1 = [];\n\n            for(const tag of scoreTagsSnapshot1.docs){\n              tempTag.push(tag.id);\n            }\n            scoredClipHistory[clip.id].TAG = tempTag.join(\", \");\n\n            for(const tag of otherScoreTagSnapshot1.docs){\n              if(!tempTag.includes(tag.id)){\n                tempTag1.push(tag.id);\n              }\n            }\n            scoredClipHistory[clip.id].other = tempTag1.join(\", \");\n            this.setState({ scoredClipHistory });\n          }\n          this.props.history.push({\n            pathname: '/main',\n            state: {\n             clipHistory: this.state.clipHistory,\n             scoredClipHistory: this.state.scoredClipHistory\n            }\n          })\n        }\n        handleKeyPress = event => {\n          if (event.key === 'Enter') {\n            document.getElementById(\"submitButton\").click();\n          }\n        }\n        //this function loads JSON file under 'public' directory (which contains each clips Url) into firebase collections\n        loadFiles = async () => {\n          var data;\n          var xmlhttp = new XMLHttpRequest();\n          var myJSON;\n          var items;\n          var dataArray = [];\n          var audiosDataRef = await this.db.collection('audios');\n          var randomRef = await this.db.collection('Randomize');\n          xmlhttp.onreadystatechange = async function(){\n            if(xmlhttp.status === 200 && xmlhttp.readyState === 4){\n              data = xmlhttp.responseText;\n              console.log(typeof(data));\n              myJSON = JSON.parse(data);\n              items = myJSON.items;\n              for(var i = 0; i < items.length; i++){\n               \taudiosDataRef.doc(i+'').set({\n                  Title: items[i].name,\n                  Url: 'https://firebasestorage.googleapis.com/v0/b/majorminer-dd13a.appspot.com/o/'+items[i].name+'?alt=media&token='+items[i].metadata.firebaseStorageDownloadTokens\n                });\n               \trandomRef.doc(i+'').set({\n               \t\tcount: 0\n               \t});\n              }\n            }\n          };\n          xmlhttp.open(\"GET\",\"/text/data.json\",true);\n          xmlhttp.send();\n          console.log(dataArray.length);\n        }\n        //random loading Url\n        loadUrl = async () => {\n          console.log(\"currentUser: \" + firebase.auth().currentUser.uid);\n          this.existingTags = {};\n          this.clipId = await this.randomizeId();\n          console.log(this.clipId);\n\n          this.audioRef = await this.db.collection('audios').doc(this.clipId);\n          try {\n            // load url\n            const doc = await this.audioRef.get();\n            this.url = doc.data().Url;\n            console.log(this.clipId);\n            console.log(this.url);\n          }catch(err){\n            console.log(err);\n          }\n          await this.setState({ loading: false });\n        }\n        //getting existing tags from database\n        loadExistingTag = tags => {\n          // load existing tags\n          try{\n            if (tags) {\n            tags.forEach(tag => (this.existingTags[tag.id] = {\n              count: tag.data().count,\n            }));\n           }\n          }catch(err){\n            console.log(\"loadExistingTagError: \" + err);\n          }\n          return this.existingTags;\n        }\n        //compare timeStamps\n        compareTime = async timeStamp => {\n          var month = [];\n          month[0] = \"January\";\n          month[1] = \"February\";\n          month[2] = \"March\";\n          month[3] = \"April\";\n          month[4] = \"May\";\n          month[5] = \"June\";\n          month[6] = \"July\";\n          month[7] = \"August\";\n          month[8] = \"September\";\n          month[9] = \"October\";\n          month[10] = \"November\";\n          month[11] = \"December\";\n\n          const thatTime = timeStamp.toMillis();\n          var d = new Date();\n          var todayDate = d.getDate()+'';\n          var thisMonth = month[d.getMonth()]+' ';\n          var year = d.getFullYear()+'';\n          const parseStringToday = thisMonth+todayDate+', '+year;\n          var today = Date.parse(parseStringToday);\n          const now = Date.now();\n          var compare = now - thatTime;\n\n          if(compare <= 3600000) return 1;\n          else if(thatTime <= today+3600000 * 24) return 2;\n          else if(thatTime <= today+3600000 * 24 * 7) return 3;\n          else return 4;\n        }\n        oneDayRange = () => {\n          var month = [];\n          month[0] = \"January\";\n          month[1] = \"February\";\n          month[2] = \"March\";\n          month[3] = \"April\";\n          month[4] = \"May\";\n          month[5] = \"June\";\n          month[6] = \"July\";\n          month[7] = \"August\";\n          month[8] = \"September\";\n          month[9] = \"October\";\n          month[10] = \"November\";\n          month[11] = \"December\";\n\n          var d = new Date();\n          var todayDate = d.getDate()+'';\n          var thisMonth = month[d.getMonth()]+' ';\n          var year = d.getFullYear()+'';\n          const parseStringToday = thisMonth+todayDate+', '+year;\n          var today = Date.parse(parseStringToday);//millionSeconds for 00:00:00 today\n          return today+ 3600000 * 24;\n        }\n        randomizeId = async() => {\n          var clip;\n          var userHasSeen = new Set();\n          var rand = Math.random();\n          var currentUserSeenSnapshot = await this.db.collection('Randomize').where('userId', 'array-contains', this.currentId).get();//current user has seen\n          for(const userSeen of currentUserSeenSnapshot.docs){\n            userHasSeen.add(userSeen.id);\n          }\n          var pnew = this.findMin(0.0066*currentUserSeenSnapshot.size,0.33);\n          console.log(\"rand\", rand);\n          console.log(\"pnew\", pnew);\n          if(rand < pnew){\n            clip = this.pick_pioneer();\n            console.log(\"rand < pnew\");\n          }else{\n            clip = this.pick_settler(userHasSeen);\n            console.log(\"rand > pnew\");\n          }\n          return clip;\n        }\n        pick_pioneer = async() => {\n          var noSeenSnapshot = await this.db.collection('Randomize').where('count', '==', 0).get();\n            if(noSeenSnapshot.size !== 0) {// pick the one has not been seen\n              console.log(\"noSeenSnapshot[0]\");\n              return noSeenSnapshot.docs[0].id+'';\n            }\n          console.log(\"Math.random\");\n          return Math.floor((Math.random()*5))+'';//every clip has been seen\n        }\n        pick_settler = async (userHasSeen) => {\n          var now = Date.now(); //pick the one has been seen && has not been seen in the last hour && current user has no seen\n          var oneHour = now - 3600000;\n          var oneHourNoSeenSnapshot = await this.db.collection('Randomize').where('millis', '<', oneHour).orderBy('millis').get();//no seen past hour\n          if(oneHourNoSeenSnapshot.size === 0){//every clip has been seen in past hour, unlikely occur but still might or there are some clips have no been seen at all\n            console.log(\"oneHourNoSeenSnapshot == 0\");\n            return this.pick_pioneer();\n          }else{//some clips have no been seen in past hour\n            ///////debug console\n            console.log(\"oneHourNoSeenSnapshot:  \",oneHourNoSeenSnapshot);\n            for(const clip of oneHourNoSeenSnapshot.docs){\n              console.log(\"oneHourNoSeenSnapshot\", clip.id);\n            }\n            ///////////\n\n            for(const clip of oneHourNoSeenSnapshot.docs){\n              if(!userHasSeen.has(clip.id)){\n                console.log(\"!userHasSeen.has(clip.id)\");\n                return clip.id+'';\n              }\n            }\n            //this user has seen all of the clips in the oneHourNoSeenSnapshot\n            return this.pick_pioneer();\n          }\n        }\n        findMin = (num1,num2) => {\n           if(num1 > num2)\n              return num2;\n            return num1;\n        }\n\n        //getting next clips\n        getNextClip = async () => {\n          await this.setState({currentTags:{}, loading: true, displayTag:{}});\n          this.loadUrl();\n        }\n        //submit tags\n        handleSubmit = async () => {\n          const newTags = document.getElementById(\"tags\").value.toLowerCase().replace(/\\s/g,'').split(\",\");\n          //generate temporatyTags set from new Tags\n          var tempCurrentTags = {};\n          this.audioTagRef = await this.audioRef.collection('tags');\n          this.audioUsersRef = await this.audioRef.collection('users');\n\n          const tags = await this.audioTagRef.get();\n          //generate exitingTags from DB\n          this.existingTags = await this.loadExistingTag(tags);\n\n          console.log(\"existingTags\");\n          console.log(this.existingTags);\n\n          newTags.forEach(tag => {\n            if(Object.keys(this.existingTags).includes(tag)){\n              tempCurrentTags[tag] = {\n                count: this.existingTags[tag].count,\n                score: 0,\n              }\n            }else{\n             tempCurrentTags[tag] = {\n                count: 0,\n                score: 0,\n              }\n            }\n          });\n          console.log(\"displayTag\");\n          console.log(this.state.displayTag);\n          document.getElementById(\"tags\").value = \"\";\n          this.loadTagsToDb(tempCurrentTags).then(tempCurrentTags => {\n            //tempCurrentTags = tempCurrentTags;\n            this.setState({currentTags: tempCurrentTags});\n            for( const tag of Object.keys(tempCurrentTags)){\n               this.setState(prevState => ({ displayTag: {...prevState.displayTag, [tag]: {score: tempCurrentTags[tag].score, count:  tempCurrentTags[tag].count }}}));\n            }\n          })\n        }\n        //get first user Id\n        getUserId = async tag => {\n          var firstUser = await this.db.collection('audios').doc(this.clipId).collection('users').where('tags', 'array-contains', tag).get();\n          console.log(\"firstUser:  \", firstUser.docs[0].id);\n          return firstUser.docs[0].id;\n        }\n        //laoding tags into DB\n        loadTagsToDb = async (currentTags) => {\n          try{\n            for(const tag of Object.keys(currentTags)){\n              await this.addUser(tag);\n              this.History(this.userRef,this.currentId,0);\n              if (currentTags[tag].count === 1) {\n                //if this user is the second person describe the tag, add 2 points to the first user\n                var firstUserId = await this.getUserId(tag);\n                var firstUserRef = await this.db.collection('users').doc(firstUserId);\n                console.log(\"!!firstUserId: \" + firstUserId);\n                if(firstUserId !== this.currentId){//if the first user is not current user\n                     this.History(firstUserRef,firstUserId,2);\n                    //get 1 point if current user is the second person describe this tag\n                     currentTags[tag].score = 1;\n                     this.History(this.userRef,this.currentId,1);\n                }\n              } else if(currentTags[tag].count === 0){ //if the user is the first person, 0 score for now, count = 1\n                  this.History(this.userRef,this.currentId,0);\n              }else{//if the user is the third or more than third person, no points\n                this.History(this.userRef,this.currentId,0);\n              }\n              await this.audioUsersRef.doc(this.currentId).set({\n                tags: staticFirebase.firestore.FieldValue.arrayUnion(tag)//add the user to \"users\" collection,save the tags as array\n              },{ merge: true });\n             }\n            }catch(err){\n            console.log(\"can't upload tags into DB!!:  \"+ err);\n          }\n          return currentTags;\n        }\n        addUser = tag => {\n          try{\n            this.audioTagRef.doc(tag).set({\n              count: staticFirebase.firestore.FieldValue.increment(1),\n              userId: staticFirebase.firestore.FieldValue.arrayUnion(this.currentId)\n            },{merge: true});\n          }catch(err){\n            console.log(\"can't add user: \" + err);\n          }\n        }\n        refreshTotalScore = (userRef,score) => {\n          userRef.update({\n            score: staticFirebase.firestore.FieldValue.increment(score)\n          })\n        }\n        isFrist = tag => {\n          this.audioTagRef.doc(tag).set({\n            count: 1,\n            userId: staticFirebase.firestore.FieldValue.arrayUnion(this.currentId)\n          })\n        }\n        History = async (userRef, userId, score) => {\n          try{\n          var userClipHistoryRef = await userRef.collection('clipHistory');\n           userClipHistoryRef.doc(this.clipId).get()\n              .then(doc => {\n                 if (doc.exists) {\n                   this.updateHistory(userClipHistoryRef,score);\n                 } else {\n                   this.createHistory(userClipHistoryRef,score);\n                 }\n                  this.refreshTotalScore(userRef,score);\n              });\n          }catch(err){\n            console.log(\"Can't create clipHistory!! \" + err);\n          }\n          if(score !== 0){//if this user gained scores, save it to the scoreRecord collection\n            var oneDayRangeMillis = this.oneDayRange();\n            try{\n              var scoreRecordRef = this.db.collection('scoreRecord').doc(userId);\n              var scoreRef = await this.db.collection('scoreRecord').doc(userId).collection('score');\n              scoreRef.doc(oneDayRangeMillis+'').get()\n                .then(doc => {\n                  if(doc.exists){\n                    scoreRef.doc(oneDayRangeMillis+'').update({\n                      score: staticFirebase.firestore.FieldValue.increment(score)\n                   });\n                  }else{\n                    scoreRef.doc(oneDayRangeMillis+'').set({\n                      score: score,\n                      millis: oneDayRangeMillis,\n                      createdAt: staticFirebase.firestore.FieldValue.serverTimestamp()\n                    })\n                  }\n                });\n              var username = await this.db.collection('users').doc(userId).get();\n              var user = username.data().username;\n              scoreRecordRef.set({\n                updated: staticFirebase.firestore.FieldValue.serverTimestamp(),\n                millis: oneDayRangeMillis,\n                username: user\n              });\n            }catch(e){\n              console.log(\"Can't add score scoreRecord!\");\n            }\n          }\n        }\n        updateHistory = (userClipHistoryRef,score) => {\n          try{\n            userClipHistoryRef.doc(this.clipId).update({\n              score: staticFirebase.firestore.FieldValue.increment(score),\n              lastUpdatedAt: staticFirebase.firestore.FieldValue.serverTimestamp()\n            });\n          }catch(err){\n            console.log(\"Can't update clipHistory: \" + err);\n          }\n        }\n        createHistory = (userClipHistoryRef,score) => {\n          try{\n            userClipHistoryRef.doc(this.clipId).set({\n              score: staticFirebase.firestore.FieldValue.increment(score),\n              createdAt: staticFirebase.firestore.FieldValue.serverTimestamp(),\n              lastUpdatedAt: staticFirebase.firestore.FieldValue.serverTimestamp()\n            });\n          }catch(err){\n            console.log(\"Can't create clipHistory: \" + err);\n          }\n        }\n        render() {\n         const url = this.url;\n         const clipId = this.clipId;\n         const {displayTag} = this.state;\n          return (\n            <div className=\"game-page\">\n            <div className=\"privacy-corner\">\n            <Link to=\"/info/privacy\" style={{ color: 'white'}}>Privacy Policy</Link>\n            </div>\n            <h1 className=\"page-title\">Describe this clip</h1>\n            <Grid container className=\"game-container\" direction=\"column\" alignItems=\"center\" spacing={16}>\n              <Grid item container alignItems=\"center\">\n                <Grid item sm={12} md={12} lg={12} ><GameRuleDialog /></Grid>\n                <Grid item sm={10} md={10} lg={10}>\n                </Grid>\n                <Grid item sm={1} md={1} lg={1}></Grid>\n              </Grid>\n              <Grid item container alignItems=\"center\">\n                <Grid item sm={3} md={3} lg={3}>\n                    <IconButton id=\"gameSummary\" className=\"game-menu\" style={{ \"borderRadius\": \"0\", color: 'white' }}>\n                    <Link to=\"/main\">\n                      <KeyboardArrowLeft />\n                      Summary\n                      </Link>\n                    </IconButton>\n                </Grid>\n                {this.state.loading ? (\n                  <Grid item sm={6} md={6} lg={6} className=\"canvas-container\">\n                    <CircularProgress size={100} thickness={3.6} />\n                  </Grid>\n                ) : (\n                  <AudioAnalyser url={url} clipId={clipId}/>\n                )}\n                <Grid item sm={3} md={3} lg={3}>\n                  <IconButton id=\"nextClip\" className=\"game-menu\" style={{ \"borderRadius\": \"0\", color: 'white' }} onClick={this.getNextClip}>\n                    Next Clip\n                    <KeyboardArrowRight />\n                  </IconButton>\n                </Grid>\n              </Grid>\n             <Grid item id=\"listTag\" sm={10} md={6} lg={8}>\n                {Object.keys(displayTag).map((tag, i) => {\n                  if (displayTag[tag].count === 0) {\n                    return (<span key={i} className=\"gray\">{tag}&nbsp;</span>)\n                  } else if (displayTag[tag].score === 1) {\n                    return (<i key={i} className=\"1-point\">{tag}&nbsp;</i>)\n                  } else {\n                    return (<span key={i} className=\"pink\">{tag}&nbsp;</span>)\n                   }\n                })}\n              </Grid>\n              <Grid item sm={10} md={6} lg={8} style={{ color: 'white' }}>\n                <FormControl margin=\"normal\" fullWidth>\n                  <InputLabel style={{ \"borderRadius\": \"0\", color: 'white' }}>>Input your tags...</InputLabel>\n                  <Input\n                    style={{ color: 'white' }}\n                    id=\"tags\"\n                    type=\"text\"\n                    autoFocus={true}\n                    inputRef={this.textInput}\n                    onKeyPress={this.handleKeyPress}\n                    endAdornment={\n                      <InputAdornment position=\"end\" style={{ color: 'white' }}>\n                        <IconButton id=\"submitButton\" onClick={this.handleSubmit} style={{ color: 'white' }}>\n                          <Send />\n                        </IconButton>\n                        <Tooltip\n                          title={\n                            <p>You can input more than one tag <br />by using commas to separate.</p>\n                          }\n                          placement=\"right\"\n                        >\n                          <Icon>\n                            <Help />\n                          </Icon>\n                        </Tooltip>\n                      </InputAdornment>\n                    }\n                  />\n                  <div className=\"game-contentbox\">\n                  <FormHelperText style={{ color: 'black' }}>\n                    Tag Colors: <b>2 points</b>, <i>1 point</i>, <span className=\"gray\"> no points yet (but could be 2)</span>, <span className=\"pink\">0 points</span>.\n                  </FormHelperText>\n                  </div>\n                </FormControl>\n              </Grid>\n            </Grid>\n            </div>\n          );\n        }\n      }\n","import React, { Component } from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardActions,\n  IconButton\n} from \"@material-ui/core\";\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\nimport Pause from \"@material-ui/icons/Pause\";\nimport Group from \"@material-ui/icons/Group\";\nimport Person from \"@material-ui/icons/Person\";\n\nclass AudioCard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      play: false,\n      seeOthers: false\n    };\n  }\n\n  componentDidMount() {\n    this.setupAudioContext();\n  }\n  setupAudioContext = () => {\n    try{\n      this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      this.gainNode = this.audioContext.createGain();\n      this.gainNode.gain.value = 15;\n      this.gainNode.connect(this.audioContext.destination);\n    }catch(error){\n      console.log(error);\n    }\n\n    this.audio = new Audio(this.props.url);\n    this.audioSource = this.audioContext.createMediaElementSource(this.audio);\n    this.audio.crossOrigin = \"anonymous\";\n    this.audioSource.connect(this.gainNode);\n    this.audioContext.resume().then(() => {\n      console.log('Playback resumed successfully');\n    })\n    this.audio.onended = () => {\n      this.setState({ play: false });\n      this.props.togglePlay(false);\n    }\n  }\n\n  toggleAudio = () => {\n    if (this.state.play === false) {\n      try {\n        this.setupAudioContext();\n      } catch(err) {\n        console.log(err);\n      }\n    }\n    this.state.play ? this.audio.pause() : this.audio.play();\n    this.setState({ play: !this.state.play });\n    this.props.togglePlay(!this.state.play);\n  }\n\n  toggleSeeOtherTags = () => {\n    this.setState({ seeOthers: !this.state.seeOthers });\n  }\n\n  componentWillUnmount() {\n    this.gainNode.disconnect();\n    this.audioSource.disconnect();\n  }\n  //Audio cards for SummaryPage.js\n  SummaryAudioCard = () => {\n    return(\n      <Card className=\"audio-card\">\n        <CardContent>\n          <h5>{this.props.clip}</h5>\n          <p>Your tags: {this.props.TAG || 'loading'}</p>\n         {this.state.seeOthers ? (\n           <p>Other's tags: {this.props.other || 'None'} </p>) : \"\"}\n        </CardContent>\n        <CardActions style={{ paddingTop: \"0\" }}>\n          <IconButton onClick={this.toggleAudio}>\n            {this.state.play ? (<Pause />) : (<PlayArrow />)}\n          </IconButton>\n          <IconButton onClick={this.toggleSeeOtherTags}>\n            {this.state.seeOthers ? (<Person />) : (<Group />)}\n          </IconButton>\n        </CardActions>\n      </Card>\n    );\n  }\n  //Audio cards for SearchResult.js\n  SearchResultAudioCard = () => {\n    return(\n      <Card className=\"audio-card\">\n      <CardContent>  \n          <h5>{this.props.clip}</h5>\n      </CardContent>\n      <CardActions style={{ paddingTop: \"0\" }}>\n          <IconButton onClick={this.toggleAudio}>\n            {this.state.play ? (<Pause />) : (<PlayArrow />)}\n          </IconButton>\n      </CardActions>\n     <h5>{this.props.tag}: {this.props.count} times</h5>\n    </Card>\n    );\n  }\n  render() {\n    return (\n      <div>\n          {this.props.fromSummary ? this.SummaryAudioCard() : this.SearchResultAudioCard()}     \n      </div>  \n    )\n  }\n}\nexport default AudioCard;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Grid\n} from \"@material-ui/core\";\nimport AudioCard from \"./AudioCard\";\nimport firebase from \"../base\";\n//TODO: load tags from DB\nclass SummaryPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      clipHistory: {},\n      scoredClipHistory: {},\n      play: false\n    }\n  }\n\n  async componentDidMount() {\n    this.user = firebase.auth().currentUser;\n    this.db = firebase.firestore();\n    this.audioRef = this.db.collection('audios');\n    this.userId = this.user.uid;\n    this.userRef = this.db.collection('users').doc(this.userId);\n   /* var tempTag = [];\n    var tempTag1 = [];\n    const clipHistorySnapshot = await this.userRef.collection('clipHistory').orderBy('lastUpdatedAt').limit(10).get();\n\n\n    const clipHistory = {};\n\n   for (const clip of clipHistorySnapshot.docs){\n      clipHistory[clip.id] = { score: clip.data().score };\n      var audio = this.audioRef.doc(clip.id).get();\n      tempTag = [];\n      tempTag1 = [];\n      var tagsSnapshot = this.audioRef.doc(clip.id).collection('users').doc(this.userId).get();\n      var otherTagSnapshot = this.audioRef.doc(clip.id).collection('tags').get();\n\n      const [audio1,tagsSnapshot1,otherTagSnapshot1] = await Promise.all([audio,tagsSnapshot,otherTagSnapshot]);\n      clipHistory[clip.id].title = audio1.data().Title;\n      clipHistory[clip.id].url = audio1.data().Url;\n      clipHistory[clip.id].id = clip.id;\n      tempTag = tagsSnapshot1.data().tags;\n      clipHistory[clip.id].TAG = tempTag.join(\", \");\n      for(const tag of otherTagSnapshot1.docs){\n         if(!tempTag.includes(tag.id)){\n          tempTag1.push(tag.id);\n         }\n      }\n        clipHistory[clip.id].other = tempTag1.join(\", \");\n      this.setState({ clipHistory });\n   }\n\n    const scoredClipHistorySnapshot = await this.userRef.collection('clipHistory').where(\"score\", \">\", 0).orderBy(\"score\").limit(10).get();\n    const scoredClipHistory = {};\n    for(const clip of scoredClipHistorySnapshot.docs){\n      scoredClipHistory[clip.id] = { score: clip.data().score };\n      var audioSnapshot = this.audioRef.doc(clip.id).get();\n      var scoreTagsSnapshot = this.audioRef.doc(clip.id).collection('tags').where(\"userId\", 'array-contains',this.userId).get();\n      var otherScoreTagSnapshot = this.audioRef.doc(clip.id).collection('tags').get();\n\n     const [audio1,scoreTagsSnapshot1,otherScoreTagSnapshot1] = await Promise.all([audioSnapshot,scoreTagsSnapshot,otherScoreTagSnapshot]);\n      scoredClipHistory[clip.id].title = audio1.data().Title;\n      scoredClipHistory[clip.id].url = audio1.data().Url;\n      scoredClipHistory[clip.id].id = clip.id;\n      tempTag = [];\n      tempTag1 = [];\n      for(const tag of scoreTagsSnapshot1.docs){\n        tempTag.push(tag.id);\n      }\n      scoredClipHistory[clip.id].TAG = tempTag.join(\", \");\n      for(const tag of otherScoreTagSnapshot1.docs){\n         if(!tempTag.includes(tag.id)){\n          tempTag1.push(tag.id);\n         }\n      }\n      scoredClipHistory[clip.id].other = tempTag1.join(\", \");\n      this.setState({ scoredClipHistory });\n    }\n    */\n  }\n  togglePlay = play => {\n    this.setState({ play });\n  }\n\n  render() {\n      const { clipHistory, scoredClipHistory } = this.state;\n    return (\n      <div className=\"summary-page\">\n      <div className=\"privacy-corner\">\n      <Link to=\"/info/privacy\">Privacy Policy</Link>\n      </div>\n      <h1 className=\"page-title\">Summary</h1>\n      <Link to=\"/main/clip\">Play Game!</Link> <br></br><br></br>\n      <Link to=\"/info/Leaders\">High Scores</Link>\n      <Grid container className=\"summary-container\" direction=\"column\" alignItems=\"center\">\n        <h2 style={{ \"font-weight\": \"400\" }}>Your last 10 clips</h2>\n        <Grid item className=\"card-list-container\">\n          <Grid container className=\"card-list\" spacing={8}>\n          {Object.keys(clipHistory).map((clip, i) => (\n            <Grid item key={clip}>\n              <AudioCard\n                url={clipHistory[clip].url}\n                clip={clipHistory[clip].title}\n                clipId={clipHistory[clip].id}\n                TAG={clipHistory[clip].TAG}\n                togglePlay={this.togglePlay}\n                other={clipHistory[clip].other}\n                fromSummary={true}\n              />\n            </Grid>\n          ))}\n          </Grid>\n        </Grid>\n        <h2 style={{ \"font-weight\": \"400\" }}>Your last scored clips</h2>\n        <Grid item className=\"card-list-container\">\n          <Grid container className=\"card-list\" spacing={8}>\n          {Object.keys(scoredClipHistory).map((clip, i) =>(\n            <Grid item key={i}>\n              <AudioCard\n                url={scoredClipHistory[clip].url}\n                clip={scoredClipHistory[clip].title}\n                TAG={scoredClipHistory[clip].TAG}\n                clipId={scoredClipHistory[clip].id}\n                other={scoredClipHistory[clip].other}\n                togglePlay={this.togglePlay}\n                fromSummary={true}\n              />\n            </Grid>\n          ))}\n          </Grid>\n        </Grid>\n      </Grid>\n      </div>\n    );\n  }\n}\n\nexport default SummaryPage;\n","import React, { Component } from \"react\";\nimport {\n  AppBar,\n  Tabs,\n  Tab,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell\n} from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\n// import app from \"../base\";\nimport app from \"../base\";\n\nclass LeadersPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: 0,\n      todayLeader: [],\n      weekLeader: [],\n      totalLeader: []\n    };\n  }\n  componentDidMount(){\n    this.user = app.auth().currentUser;\n    this.db = app.firestore();\n     if(this.user){\n      this.currentId = app.auth().currentUser.uid;\n    }\n    this.getTotal();\n    this.getToday();\n    this.getWeek();\n  }\n  month = () => {\n     var month = [];\n      month[0] = \"January\";\n      month[1] = \"February\";\n      month[2] = \"March\";\n      month[3] = \"April\";\n      month[4] = \"May\";\n      month[5] = \"June\";\n      month[6] = \"July\";\n      month[7] = \"August\";\n      month[8] = \"September\";\n      month[9] = \"October\";\n      month[10] = \"November\";\n      month[11] = \"December\";\n      return month;\n  }\n  handleChange = (event, value) => {\n    this.setState({ value });\n  };\n  oneDayRange = () => {\n    var monthArray = this.month();\n    var d = new Date();\n    var todayDate = d.getDate()+'';\n    var month = monthArray[d.getMonth()]+' ';\n    var year = d.getFullYear()+'';\n    const parseStringToday = month+todayDate+', '+year;\n    var today = Date.parse(parseStringToday);//millionSeconds for 00:00:00 today\n    console.log(\"today: \", today);\n    return today+ 3600000 * 24;\n  }\n  firstOfWeekRange = () => {\n    var monthArray = this.month();\n    var d = new Date();\n    var first = d.getDay();\n    var todayDate = d.getDate()+'';\n    var month = monthArray[d.getMonth()]+' ';\n    var year = d.getFullYear()+'';\n    const parseStringToday = month+todayDate+', '+year;\n    var today = Date.parse(parseStringToday);\n    console.log(\"first day of the week\", first);\n\n    var firstOfWeek = today - (first-1)*3600000*24; //Database collection saved a day after current day's millionseconds\n    return firstOfWeek;\n  }\n  //get Total Leaders\n  getTotal = async () => {\n    const totalLeader = [];\n    const userSnapshot = await this.db.collection('users').where(\"score\", \">\", 0).get();\n    for(const doc of userSnapshot.docs){\n      let set = {username: doc.data().username, score: doc.data().score, userId: doc.id};\n        totalLeader.push(set);\n    }\n    totalLeader.sort((a,b) => {\n      return b.score-a.score;\n    })\n    totalLeader.splice(10,totalLeader.length);//only display first 10th user\n    await this.setState({totalLeader: totalLeader});\n      console.log(this.state.totalLeader);\n  };\n  //get Today's leaders\n  getToday = async () => {\n    const todayLeader = [];\n    var todayRange = this.oneDayRange();\n    var todayUserSnapshot = await this.db.collection('scoreRecord').where('millis', '==', todayRange).get();\n    for(const user of todayUserSnapshot.docs){\n      var score = await this.db.collection('scoreRecord').doc(user.id).collection('score').where('millis','==',todayRange).get();\n      let set = {username: user.data().username, score: score.docs[0].data().score, userId: user.id};\n      todayLeader.push(set);\n    }\n    todayLeader.sort((a,b) => {\n      return b.score-a.score;\n    })\n    todayLeader.splice(10,todayLeader.length);\n    await this.setState({todayLeader: todayLeader});\n    console.log(\"today: \", new Date(todayRange));\n    console.log(\"today!!!leader: \", todayLeader);\n  }\n  //get this week's leaders\n  getWeek = async () => {\n    const weekLeader = [];\n    var thisWeekRange = this.firstOfWeekRange();\n    console.log(\"thisWeekRange:  \", thisWeekRange);\n    console.log(\"Sunday\", new Date(thisWeekRange));\n    var weekUserSnapshot = await this.db.collection('scoreRecord').where('millis', '>=', thisWeekRange).get();\n    for(const user of weekUserSnapshot.docs){\n      var totalScore=0;\n      var scoreSnapshot = await this.db.collection('scoreRecord').doc(user.id).collection('score').where('millis', '>=', thisWeekRange).get();\n      for(const score of scoreSnapshot.docs){\n        totalScore += score.data().score;\n      }\n      let set = {username: user.data().username, score: totalScore, userId: user.id};\n      weekLeader.push(set);\n    }\n    weekLeader.sort((a,b) => {\n      return b.score-a.score;\n    })\n    weekLeader.splice(10,weekLeader.length);\n    await this.setState({weekLeader: weekLeader});\n    console.log(\"weekLeader: \", weekLeader);\n  }\n  getTabContent = (todayLeader, weekLeader, totalLeader) => {\n\n      let content;\n      switch(this.state.value){\n        case 0:\n          content = todayLeader;//this.todayTable();\n          break;\n        case 1:\n          content = weekLeader;//this.weekTable();\n          break;\n        case 2:\n          content = totalLeader;//this.totalTable();\n          break;\n        default:\n          content = [];\n    }\n    return (\n      <Table className=\"leaderboard\">\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\" style={{ color: 'white' }}>User</TableCell>\n            <TableCell align=\"center\" style={{ color: 'white' }}>Score</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {content.map((user,i) => (\n            <TableRow key={user.userId}>\n              <TableCell align=\"center\" >{user.username}</TableCell>\n              <TableCell align=\"center\">{user.score}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    );\n  }\n\n  render() {\n    const {todayLeader,weekLeader,totalLeader} = this.state;\n    return (\n      <div className=\"leaders-page\">\n      <div className=\"privacy-corner\">\n      <Link to=\"/info/privacy\" style={{ \"color\": \"white\"}}>Privacy Policy</Link>\n      </div>\n      <div>\n        <h1 className=\"page-title\">High Scores</h1>\n        <div className=\"table-container\">\n          <AppBar position=\"static\">\n            <Tabs\n              value={this.state.value}\n              onChange={this.handleChange}\n              centered\n            >\n              <Tab label=\"Today\" />\n              <Tab label=\"This week\" />\n              <Tab label=\"Total\" />\n            </Tabs>\n          </AppBar>\n          {this.getTabContent(todayLeader,weekLeader,totalLeader)}\n        </div>\n      </div>\n    </div>\n    )\n  }\n}\n\nexport default LeadersPage;\n","import React, { Component } from \"react\";\nimport {\n  Grid,\n  Button\n} from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport firebase from \"../base\";\n\nclass SearchPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      topTags: []\n    };\n  }\n  async componentDidMount(){\n     this.user = firebase.auth().currentUser;\n     this.db = firebase.firestore();\n     this.currentId = firebase.auth().currentUser.uid;\n     this.userRef = this.db.collection('users');\n     this.setState({\n       topTags: await this.getTagList()\n     })\n  }\n   getTagList = async () => {\n      var tagList = [];\n      const myPromise = await this.db.collection('tagList').orderBy(\"count\",\"desc\").limit(10).get();\n      for(const p of myPromise.docs)\n         tagList.push({tag: p.id, count: p.data().count});\n     return tagList;\n  }\n  handleKeyPress = event => {\n    if (event.key === 'Enter') {\n      document.getElementById(\"searchButton\").click();\n    }\n  }\n  handleSubmit = () => {\n     var searchItem = document.getElementById(\"searchItem\").value;\n     this.handleListClick(null,searchItem);\n  }\n  //when each tag has been clicked..\n  handleListClick = async (event,tag) => {\n    const tagPromise = await this.db.collection('tagList').doc(tag).collection('clipIDs').get();\n    const tagOrder = await this.db.collection('tagList').doc(tag).collection('clipIDs').orderBy('count','desc').get();\n    var tagOrderArray = [];\n    for(const p of tagOrder.docs)\n       tagOrderArray.push({tag: p.id, count: p.data().count});\n\n    this.MyTagMap = {};\n    for(const p of tagPromise.docs){\n        this.MyTagMap[p.id] = {};\n        const tagObject = await this.db.collection('tagList').doc(tag).collection('clipIDs').doc(p.id).get();\n        this.MyTagMap[p.id].url = tagObject.data().Url;\n        this.MyTagMap[p.id].clip = tagObject.data().Title;\n        this.MyTagMap[p.id].count = tagObject.data().count;\n    }\n    this.props.history.push({\n      pathname: '/seachresult',\n      state: {\n        tag: tag,\n        MyTag: this.MyTagMap,\n        tagOrderArray: tagOrderArray,\n        clipNumber: tagPromise.size\n      }\n    })\n  }\n  getList = (topTags) =>{\n    return(\n      <List>\n        {topTags.map( (item,tag) =>(\n          <ListItem button = {true} key={item.tag}>\n            <ListItemText primary= {item.tag} onClick = {event => this.handleListClick(event, item.tag)}/>\n          </ListItem>\n        ))}\n      </List>\n    );\n  }\n  render() {\n    const{topTags} = this.state;\n    return (\n      <div className=\"search-page\">\n    \t <Grid container\n          className=\"search-container\"\n          direction=\"column\"\n          alignItems=\"center\">\n        \t <Grid item>\n          \t<h1 className=\"page-title\">Search</h1>\n            <div className=\"privacy-corner\">\n            <Link to=\"./info/privacy\" style={{ \"color\": \"white\"}}>Privacy Policy</Link>\n            </div>\n           </Grid>\n          <Grid item >\n              <label>Search by tag: </label>\n              <input\n                id=\"searchItem\"\n                type=\"text\"\n                onKeyPress={this.handleKeyPress}/>\n                <Button id=\"searchButton\" onClick={this.handleSubmit}>search</Button>\n          </Grid>\n         <Grid item xs={12} md={6}>\n              <div >\n                 {this.getList(topTags)}\n              </div>\n          </Grid>\n      </Grid>\n    </div>\n    )\n  }\n}\n\nexport default SearchPage;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Grid\n} from \"@material-ui/core\";\nimport AudioCard from \"../main/AudioCard\";\nimport firebase from \"../base\";\n\nclass SearchResult extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      play: false\n    }\n  }\n  async componentDidMount() {\n    this.user = firebase.auth().currentUser;\n    this.db = firebase.firestore();\n    this.audioRef = this.db.collection('audios');\n    this.userId = this.user.uid;\n    this.userRef = this.db.collection('users').doc(this.userId);\n  }\n  togglePlay = play => {\n    this.setState({ play });\n  }\n  render() {\n    const {MyTag,tag,clipNumber,tagOrderArray} = this.props.location.state\n    return (\n      <div className=\"search-page\">\n      <Grid container className=\"summary-container\" direction=\"column\" alignItems=\"center\">\n        <Grid item>\n        <h1 className=\"page-title\">Search Results</h1>\n        <div className=\"privacy-corner\">\n        <Link to=\"/info/privacy\" style={{ \"color\": \"white\"}}>Privacy Policy</Link>\n        </div>\n        </Grid>\n        <Grid item>\n          <Link to=\"/search\">Search more!</Link>\n        </Grid>\n        <Grid item>\n          <Link to=\"/main/clip\">Play Game!</Link>\n        </Grid>\n    <h2>Here are {clipNumber} clip have been describe as {tag}</h2>\n        <Grid item className=\"card-list-container\">\n          <Grid container className=\"card-list\" spacing={8}>\n          {tagOrderArray.map((clip, i) => (\n            <Grid item key={clip.tag}>\n              <AudioCard\n                tag={tag}\n                clip={MyTag[clip.tag].clip}\n                url={MyTag[clip.tag].url}\n                count={MyTag[clip.tag].count}\n                togglePlay={this.togglePlay}\n                fromSummary={false}\n              />\n            </Grid>\n          ))}\n          </Grid>\n        </Grid>\n      </Grid>\n    </div>\n    );\n  }\n}\n\nexport default SearchResult;\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\";\nimport firebase from \"./base\";\nimport {\n  MuiThemeProvider,\n  createMuiTheme,\n  CircularProgress\n} from \"@material-ui/core\";\nimport LandingPage from \"./landing/LandingPage\";\nimport FaqPage from \"./info/FaqPage\";\nimport AboutPage from \"./info/AboutPage\";\nimport ContactPage from \"./info/ContactPage\";\nimport PrivacyPage from \"./info/PrivacyPage\";\nimport Header from \"./root/Header\";\n//import Footer from \"./root/Footer\";\nimport NewGamePage from \"./main/NewGamePage\";\nimport SummaryPage from \"./main/SummaryPage\";\nimport LeadersPage from \"./info/LeadersPage\";\nimport SearchPage from \"./search/SearchPage\";\nimport SearchResult from \"./search/SearchResult\";\n\n\nexport const add = (x,y) => {\n  return x+y;\n};\n\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#224440\",\n    },\n    secondary: {\n      main: \"#ffffff\"\n    }\n  },\n  typography: {\n    useNextVariants: true,\n  },\n  overrides: {\n    MuiInput: {\n      underline: {\n        \"&:before\": {\n          borderBottom: `1px solid white`,\n        },\n        \"&:hover\": {\n          borderBottom: `1px solid white`,\n        },\n        \"&:after\": {\n          borderBottom: `1px solid white`,\n        },\n        '&:hover:not($disabled):not($focused):not($error):before': {\n    borderBottom: `2px solid white !important`}\n      }\n    }\n  }\n});\n\nfunction PrivateRoute({ component: Component, authenticated, ...rest }) {\n  return (\n    <Route\n    {...rest}\n    render={props =>\n      authenticated === true ? (\n        <Component {...props} {...rest} />\n      ) : (\n        <Redirect to=\"/Major--Miner\" />\n        //<Redirect to=\"/\" />\n      )\n    }\n    />\n  );\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authenticated: false,\n      user: null,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    this.listener = firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({\n          authenticated: true,\n          user: user,\n          loading: false\n        });\n      } else {\n        this.setState({\n          authenticated: false,\n          user: null,\n          loading: false\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.listener();\n  }\n\n  toggleAuth = auth => {\n    this.setState({ authenticated: auth });\n  };\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <MuiThemeProvider theme={theme}>\n        <div className=\"loading-container\">\n        <CircularProgress size={100} thickness={3.6} />\n        </div>\n        </MuiThemeProvider>\n      );\n    }\n    return (\n      <MuiThemeProvider theme={theme} >\n      <Router>\n      <div className=\"App\">\n      <Header\n      authenticated={this.state.authenticated}\n      toggleAuth={this.toggleAuth}\n      />\n      <main>\n      <Route\n      exact\n      path=\"/Major--Miner\"\n      // path=\"/\"\n\n\n      render={props => (\n        <LandingPage\n        {...props}\n        authenticated={this.state.authenticated}\n        />\n      )}\n      />\n      <Route path=\"/info/faq\" component={FaqPage} />\n      <Route path=\"/info/contact\" component={ContactPage} />\n      <Route path=\"/info/about\" component={AboutPage} />\n      <Route path=\"/info/privacy\" component={PrivacyPage} />\n      <Route path=\"/info/leaders\" component={LeadersPage} />\n      {/*<Route path=\"/search\" component={SearchPage} />*/}\n      <Route path=\"/seachresult\" component={SearchResult} />\n      <PrivateRoute\n      exact\n      path=\"/main\"\n      component={SummaryPage}\n      authenticated={this.state.authenticated}\n      />\n      <PrivateRoute\n      exact\n      path=\"/main/clip\"\n      component={NewGamePage}\n      authenticated={this.state.authenticated}\n      />\n      <PrivateRoute\n      path=\"/search\"\n      component={SearchPage}\n      authenticated={this.state.authenticated}\n      />\n      </main>\n      </div>\n      </Router>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}